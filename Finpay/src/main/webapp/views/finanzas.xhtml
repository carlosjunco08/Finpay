<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Finanzas Personales</title>
</h:head>

<h:body>
    <h:form id="financeForm">

        <h1>ðŸ’° Finanzas Personales</h1>

        <!-- Panel de registro de transacciÃ³n -->
        <p:panel header="Nueva TransacciÃ³n" style="margin-bottom:20px;">
            <h:panelGrid columns="2" cellpadding="5">

                <h:outputLabel value="Monto:" for="amount"/>
                <p:inputText id="amount" value="#{financeBean.formTransaction.amount}" />

                <h:outputLabel value="Tipo:" for="type"/>
                <p:selectOneMenu id="type" value="#{financeBean.formTransaction.type}">
                    <f:selectItem itemLabel="Seleccione..." itemValue="" />
                    <f:selectItem itemLabel="Ingreso" itemValue="Ingreso" />
                    <f:selectItem itemLabel="Gasto" itemValue="Gasto" />
                </p:selectOneMenu>

                <h:outputLabel value="CategorÃ­a:" for="category"/>
                <p:inputText id="category" value="#{financeBean.formTransaction.category}" />

                <h:outputLabel value="Fecha:" for="date"/>
                <p:calendar id="date" value="#{financeBean.formTransaction.date}" pattern="dd/MM/yyyy" />

            </h:panelGrid>

            <p:commandButton value="Agregar"
                             actionListener="#{financeBean.addTransaction}"
                             update=":financeForm:financeTable :financeForm:chart"
                             icon="pi pi-plus"
                             style="margin-top:10px;" />
        </p:panel>

        <!-- Tabla de transacciones -->
        <p:dataTable id="financeTable"
                     value="#{financeBean.transactions}"
                     var="t"
                     style="width:100%;"
                     paginator="true"
                     rows="5">

            <p:column headerText="Monto">
                <h:outputText value="#{t.amount}" />
            </p:column>

            <p:column headerText="Tipo">
                <h:outputText value="#{t.type}" />
            </p:column>

            <p:column headerText="CategorÃ­a">
                <h:outputText value="#{t.category}" />
            </p:column>

            <p:column headerText="Fecha">
                <h:outputText value="#{t.date}">
                    <f:convertDateTime pattern="dd/MM/yyyy" />
                </h:outputText>
            </p:column>

        </p:dataTable>

        <!-- Dashboard simple con grÃ¡fico -->
        <p:panel header="Resumen de Finanzas" style="margin-top:20px;">
            <p:chart id="chart"
                     type="pie"
                     model="#{financeBean.chartModel}"
                     style="width:400px;height:300px;" />
        </p:panel>

    </h:form>
</h:body>
</html>
